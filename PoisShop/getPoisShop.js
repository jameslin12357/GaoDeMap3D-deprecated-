var request = require('request');
const fs = require('fs');

// 获取沈阳市医院POI数据

// count = 896 actual = 900
function getPoisHospital(){
    for (var i = 0; i < 45; i++) {
        var page = i + 1;
        request(`https://restapi.amap.com/v3/place/text?key=c7aeb11746b35a92b7b6eee3178a05e4&keywords=&types=060000&city=210100&children=1&offset=20&page=${page}&extensions=all`, function (error, response, body) {
            var obj = JSON.parse(body);
            var pois = obj.pois;
            var ids = "";
            console.log(pois);

            pois.forEach(function(poi){
                ids += `{"poiId":"${poi.id}","poiLocation":"${poi.location}","poiName":"${poi.name}","poiType":"${poi.type}","poiAddress":"${poi.address}"},`;
            })
            fs.appendFile("./poisShop.txt", ids, (error)=> {
                if (error) return console.log("追加文件失败" + error.message);
                console.log("追加成功");
            });
        });
    }
}

getPoisHospital();























// var idPois = ["B001804A87","B00180JJ71","B00180KD53","B00180CDER","B0018178XP","B00180AXUK","B0FFGY0IOW","B00180EH6G","B0FFG70MO9","B00180JNVP","B00180JQFZ","B00180609B","B00180I8XJ","B00180KABJ","B0018171WA","B00180489F","B00180I813","B0FFGI0ADB","B00180JBAG","B00180I36V","B00180I39J","B001809665","B00180BPW7","B00180JOX3","B0FFHPPDW3","B00180DP8G","B00180BFCZ","B00180JWIY","B00180JMHG","B00181771I","B00180842A","B00180J92W","B00180HFDE","B0FFFA9FL4","B00180BFR5","B00180IBTP","B0FFFD8IAP","B00180IVSJ","B00180JN7S","B00181BJPF","B00180J4AL","B0FFGDXPZ0","B00180K3ZO","B00180566D","B00180BKVG","B0FFG6841X","B0018171W8","B00180CO38","B001804442","B001804AA6","B00180C973","B0018049F0","B001816EQB","B0FFFD8HH7","B00181FMPT","B0FFGTC16E","B00180B1B1","B001808ED3","B0FFGHS0VO","B00180FUKE","B00180CWQO","B001802FB0","B00180BP9S","B00180AHOX","B00180GRRO","B00180BWF3","B0FFGWOUCI","B001804B38","B0018169R6","B001804A1E","B00180JRU5","B001807AB6","B00180F7TT","B001804931","B00180I36E","B00180928B","B00180CW6K","B00180ASW5","B001804741","B00180H4PQ","B0FFGT123F","B00180GRXL","B0FFGT123H","B0FFGT123G","B0018085A9","B00180J7SI","B0018161S4","B00180KD56","B001805F6E","B001809E1B","B0FFF2F92A","B001817GIW","B0018177RI","B001817I4Z","B00180FHV5","B00180I3DP","B00180CWLG","B00180GMUP","B00181760X","B00180DM9I","B0FFGT0T1M","B00180842A","B00180J92W","B00180HFDE","B0FFFA9FL4","B00180BFR5","B00180IBTP","B0FFFD8IAP","B00180IVSJ","B00180JN7S","B00181BJPF","B00180I3OW","B0FFHD1BEJ","B0FFIZH897","B00180J7CM","B00180JS20","B00180JB9T","B00180K6WR","B00180KFQG","B0FFF9JQO3","B0FFFTABZ1","B00180INIG","B00180I36Z","B00180I3PY","B001819RMN","B00181BF41","B00180K4B6","B00180BGQR","B001806EFC","B001816XNF","B001816BT3","B00181CSKZ","B00180K4Q4","B001816VMB","B001806A8D","B0FFIS051P","B0FFFA95Q2","B0FFFA90ML","B0FFFDDNO2","B0FFFA9GR0","B0FFGELDD2","B00180KD7M","B00181BGBH","B0018160N2","B00180IB9N","B00180JAXV","B00180I3BL","B00180CYE5","B0FFF5RR8Z","B0FFF5RR9F","B0FFF5RR9D","B0FFF5RR9A","B0FFFCX273","B0018162QD","B0FFGELDD3","B0018166BJ","B0FFF5STWS","B00180DALI","B00180K4AU","B00180JXI0","B0FFI2MTQV","B00180HFBJ","B00180ISPV","B00180CWGN","B0FFFAM8VT","B00180H0XL","B0FFFA9HXU","B0FFGLBH3Z","B001817WMK","B0018163SP","B00180IBSM","B0018169WR","B0018177QL","B00180KDB0","B0FFF5SBKL","B0FFG8MWJ8","B001816NM5","B001817X73","B00181BOO8","B0FFHMTUWQ","B00180DF92","B00180I39T","B00180GLUC","B00180EU89","B0FFGP7MCK","B00180GGZ5","B00180KDWJ","B00181C0B2","B00180I3IU","B00180BYFA","B0FFF5Q9ZG","B0018173GG","B00180IAYN","B0FFG7UU93","B00180DGE1","B0FFI2MEOK","B0FFFTY7RZ","B0FFHBSUZL","B0FFGA58VH","B00180D55O","B00180JWBG","B00181ESQG","B0FFGU7E6C","B001816E4K","B00180KDWO","B00180GZ3S","B0FFIAB350","B0FFFA9CLR","B0FFH9LKQU","B00181BGCE","B0FFGT0PJ9","B0FFGT0PJF","B00180970F","B0FFHSC5YE","B0FFH89N8S","B00180JIPZ","B0FFI7KIH2","B0FFHSYNX8","B001816OIV","B00180I3HP","B0FFH9LMP0","B0FFHZZDYU","B0FFH29QQS","B00180KDDL","B0018179S0","B0FFHDA8FH","B001803F29","B0FFHD0J0G","B0018163CL","B0FFHBT2AS","B0FFHJMOB7","B00180IUS6","B0FFGCTOPN","B001816XCA","B00181BVDK","B0FFHCMTEL","B00180JCML","B001816BL5","B0FFH9PQ1D","B00180KDJ4","B0FFGT0PJ7","B00180DC0K","B00180FJAT","B00180IHGV","B0FFH06LL8","B00180IBYM","B0FFI7KIH3","B00180K50C","B00180IDC7","B001816Z1N","B0FFGE2O0M","B00180GFF3","B00180IAF5","B0FFHM6KWN","B00181BJNG","B00180H4PV","B0018164S5","B0018160WB","B001816Y97","B001817J3W","B00180I39V","B001816CTA","B00180I3QV","B0FFKPCTDF","B0FFHUUYI9","B00180JAAJ","B001819SCD","B001807D24","B0FFHNRBBD","B0FFKJMTM2","B00180GO02","B0FFKQXEGN","B00180JYI9","B0FFG4WYG3","B0FFH0ND0L","B0FFGH8UQ1","B0FFGN9X0S","B00180GNG8","B0FFHMDWLM","B001808780","B0FFH89M83","B0FFH89N86","B001805A2C","B0FFGT0NQA","B0FFIAH8L7","B00180GRD3","B0FFHSYKFH","B0FFIZ7PUE","B0FFGT1OV3","B0FFGT1OV2","B0018053D5","B0018064A9","B0FFHCQV43","B00180FFJT","B00180JJCT","B0FFGG5KU5","B00180JT5J","B0FFIKMH6E","B00181FMI1","B0FFF0EU7S","B001816Y71","B0FFGSGPHU","B00180JRK1","B00180FCK1","B0FFH9AN9C","B0FFH2GJPD","B0FFGTH7UX","B0FFGT377E","B0FFGT31EZ","B00180JWTA","B00180JTL2","B00180HFDF","B0FFH23KEF","B0FFH97INY","B0FFK5E7XO","B00180I3KW","B00180567B","B0FFGEL5AV","B001817GRO","B00181695C","B00180GOLW","B001816OKL","B00180JTPW","B0FFH2I4BK","B00180AAB1","B00180KCWL","B001816XCB","B0018161XU","B00180IHN3","B0FFHU7UL3","B0FFICE6L8","B0FFH89W5U","B0FFHNKM47","B0018164VW","B0FFHCQR3U","B00180J44D","B00181666X","B00180JW1I","B0018166PI","B00180KCTO","B00180A524","B0FFGMGHXN","B00180D9OZ","B0FFJ2EEEA","B0FFHDCD0N","B00180HG8C","B0FFGT1J88","B0FFGT1J87","B00180A3A8","B001816Y8M","B0FFGMEWJS","B00180KCY0","B00180I39N","B00180JPM7","B00180IARC","B001816Z5V","B00180K6AY","B00180IBOR","B001817X6W","B00181BHQR","B00181DQXW","B00180E075","B00180JR5S","B0FFG1DF57","B00180DALG","B0FFG6FNDP","B001816QWY","B001808228","B00180JAPE","B00180ISKZ","B00180CZ4E","B0FFFA9GPM","B001806C6B","B00180JOW3","B0018176QC","B00180G4NT","B0FFFR8UQ0","B00180F8HE","B00180CZYF","B00180JO59","B0FFHBBX1B","B00181756K","B0FFH9NE4P","B0FFHZ6XJ6","B0FFF2NEZD","B001806C32","B00180JM9Q","B00180I3KX","B0FFHFKT1U","B0FFG7E7AK","B0FFHEKQBZ","B0FFHEKWKC","B001807E35","B00180KDX5","B0FFGLFHWX","B0FFHD0SW2","B0FFGNFGZG","B001817IGL","B00180IQA8","B001817MSG","B0FFGX7MY5","B00181BZTV","B00180JSSH","B00180K52U","B00181BFKQ","B00180JSF8","B0FFGNMGP4","B001805FA3","B00180AYB3","B0FFG7MFCL","B00180GNVJ","B0FFHBT6MK","B00180KDQB","B0FFIA59AS","B001805F8B","B0FFHLWK3Q","B0FFH8IZLX","B0FFHDE5N8","B0FFI96VW6","B00180JJG2","B00181FMN5","B001802B14","B0FFHD7OCG","B00180K4MK","B00180J2OM","B0FFJ2DUBU","B00181A5D5","B00180IKEK","B001817GML","B00180AH6G","B00181C240","B0018179YY","B00180I3PL","B00180GFEV","B001817IUZ","B0FFHCPQX3","B0FFHCPS2K","B0FFHDLKDB","B0FFHCQUS4","B00180GPV3","B0018166B6","B00180GVKX","B0FFGD9247","B00180DRYH","B0FFH0Q0LB","B0FFGT0PJS","B0018177AT","B00180JN3D","B00180JX78","B00180I3NR","B001809EA7","B00180GY97","B0FFGPNY2J","B00181A1OF","B00180D511","B0FFFY0N50","B00180EPT4","B0FFH0RPAD","B0FFHDG0SL","B00180JRJI","B00180HGX1","B0FFHFKWUU","B001803037","B0018171V5","B00180JQU4","B0FFF9I5JK","B0FFH2HIPP","B0FFHO6A5B","B0FFHIK8PF","B00180DC0L","B00180EUQN","B001816Z5H","B00181C56X","B0FFHCPQ6A","B00180GFZ6","B00180I35I","B00180JPD6","B00180GVLL","B00180JB42","B0FFHP0PGM","B001816Z02","B00180JO2O","B00180EUOT","B00180DB5E","B0FFFWZQT8","B00180BEHY","B0FFKSR1C2","B0018176AY","B0FFKTMLQD","B0FFGMPP4C","B00180INM0","B0FFI9TQBG","B001816C9Y","B0FFG6APIV","B0FFJY3ICM","B00180819D","B0018178PP","B001816MZL","B00180D84O","B00180KDS4","B00180I37J","B00180KDIY","B00180IL41","B001817X7Z","B0FFJ2X4VL","B0FFG7NF8H","B001816BKK","B0FFICD07P","B00180IBOO","B0FFHFMHZK","B0FFGF2FCJ","B00180IO4T","B00180K78J","B0FFGRK8JK","B00180FTPA","B00180HBWE","B00180DNYJ","B00180B9M1","B00180D6PR","B0FFGTHTSJ","B00180JNYO","B00180JLDA","B001816PGL","B00180GROL","B0FFFGW7K8","B00180CKQW","B00180JII6","B00180CXCU","B0018171ZU","B00180FKKN","B00180I990","B001805691","B0FFF5RR8U","B0FFF5RR8W","B0FFHOIMX8","B0FFIJQW3X","B001816D75","B0FFG8B38X","B0FFH2UE9R","B00180JIRH","B00180FT35","B0FFF0B3PW","B0FFHM5B4S","B00180I3PN","B00180JWP7","B0FFH89OI0","B0FFF62Y1C","B00180CLJ4","B00180I3M4","B00180IWVN","B00180I853","B001816YAY","B0FFGXYRYN","B00180JK0B","B0FFHZ4B4Z","B00181BFY4","B00180JNQM","B00180K79S","B0018173NN","B0FFIJL1QT","B00180IJMJ","B00180I3EG","B0018168T2","B00180D4TP","B0FFI2MT5F","B00180K4UT","B00180K4H8","B00181EZHO","B00180I3S8","B00180FYAY","B00180DAMC","B00180I38M","B001816SPR","B00180JSJP","B00180D508","B00180IBTR","B00180JPO4","B0FFGA9VOR","B001802B5A","B0018175LK","B00180JIKM","B0FFGPR06H","B0FFGPNY2H","B0FFGPNXLT","B00180JRAA","B0018163BG","B0FFGRG3J2","B001816UF4","B0FFGRN3SS","B0FFIE4XEZ","B0018178P7","B0FFGU7E6B","B00180GMTA","B0FFFGVVD7","B00180GXYA","B0FFGT0S3I","B0FFGT0S3H","B0FFHK9P53","B001817HR5","B001817HID","B00180EUFG","B0FFF0EJIU","B00181EOI2","B00180KKA1","B00180I36F","B001808A67","B00180BKR0","B00180I36L","B0FFHBT22Q","B0FFFV619F","B00181FQBZ","B00180JOI4","B0018047D8","B00180322B","B00180JAXN","B00180IUUO","B00180I39P","B00180KE1F","B0FFGE6G6M","B0FFGE6GTB","B0FFHMM728","B0FFHCKL8S","B0FFGAWCHD","B0018176IA","B00180F6I9","B0FFGTHS2K","B00180GNGI","B0FFGTHS2J","B00180JV7S","B00180JKFT","B00180J54Z","B0FFGT0SEG","B0FFGT0S3E","B0FFH21LKU","B0FFH4A89S","B0FFH8UTH2","B0FFHD3WL5","B0FFH2BTXB","B0FFHIAXHV","B00180JNDZ","B001816D84","B001819R4G","B0FFH89JMU","B0FFH9LOZU","B001817H5X","B00180I390","B00181BJTJ","B0FFIAB3MI","B00180DN0B","B0FFKQ20NG","B00180EUQA","B0FFKF4FEQ","B00180GZ3E","B00180I3PX","B0FFGT1J83","B0FFGT1H93","B0018166AH","B0FFHKLHYK","B00180D5CU","B00180D6LP","B0FFK522IV","B0FFK522JB","B0FFK52E88","B0FFHD6TH9","B0FFHD8QZT","B0FFKHFV4X","B001802ADD","B0FFHT71XF","B001816Y6U","B0FFJ2U4TO","B00180KD58","B0FFKRQNJQ","B0FFKRPA1J","B0FFKPY039","B0FFKGST3H","B0FFIP11GY","B0FFI7VWRJ","B0FFHUE9T2","B0FFHSQWZP","B0FFHP1M33","B00180DC08","B00180937E","B00180IULD","B001817MWP","B0FFI2E6F9","B001817X4V","B0FFI9DJ2D","B00180GG2C","B0FFHFM0OR","B00180I3QS","B00180D4MK","B00180DV89","B00180CLJI","B00180DOUA","B00181EKHN","B0018169GK","B00180B3DX","B00180GGZB","B0FFHB9C4C","B0FFIKQ84G","B0FFGLEYZ3","B0FFGEL2F5","B0FFGEL2F3","B0FFGEL2F2","B0FFGEL2F1","B0FFGEI1U7","B0FFGEGH2X","B0FFFYR3AK","B0FFF5S6LX","B00181CSB3","B001817WAI","B001816CBL","B0018165HV","B00180KDHW","B00180KDAF","B00180KD57","B00180KD4P","B00180KCZG","B00180J45W","B00180J42Z","B001817GHJ","B00180I393","B00181BESB","B0FFFAE2F7","B0FFGLFHWA","B0FFH72WSD","B00180406E","B00180E9OO","B00180I3LA","B00180KE2R","B001816U14","B0018163BH","B00180JQG0","B00180CWPJ","B0FFGEUIYC","B0FFGEUIVT","B0FFGEUIYB","B0FFGEUIYA","B001816AM1","B00180IU1G","B0FFFA9AI4","B0FFF5RR8S","B00180D41T","B0FFGCW9FX","B0FFHBURD8","B00180GFEW","B001816XKT","B00180D50W","B00180JNOZ","B00181CT7F","B0FFFFV27G","B00181BZY1","B00180I3HM","B00180BEXS","B0FFGELDD0","B0FFGELDD1","B00180JTDS","B0018163FW","B00180FV80","B00180FDMX","B00180EVNW","B0FFFSLSJO","B00180ES1O","B00180I37L","B0FFHVPG4O","B00180GR3L","B0FFGT3B2Z","B0FFGT3B2Y","B0FFHOL9AY","B0FFGUEIF3","B00180JSUT","B0FFGT3H44","B0FFGT3H43","B0FFGT3H42","B00180EADJ","B00181BE79","B0018161YG","B00180ID1A","B00180JRYJ","B00180K7KL","B0FFF5RR93","B0FFHCQFVH","B0FFHL4PHH","B001806A26","B0FFI1QQ8L","B00180KE1C","B001807704","B00180BOJA","B00180K56N","B00180HG74","B00180IUPT","B00180JTQL","B0FFI66J1Z","B0FFH45GSR","B0FFG580JK","B0FFHA1BPW","B00180I38B","B0FFHVPOBU","B00180DXFZ","B0FFFVUQUA","B00180I9WU","B0FFH45CTI","B00180GUOU","B0018171Q6","B00180I3PO","B00180I3LO","B00180DZL2","B00180I36K","B001816923","B00180I3MH","B0018058F1","B00180I3K3","B001816Y9Y","B00180FYJE","B0FFHDB1SD","B001816P67","B00180I3O3","B001816BHV","B00180I39K","B0FFHRPRA8","B00180JKRH","B00180F8B1","B0FFKQ8HK1","B00180GX08","B00180I45D","B00180BFC2","B0FFGB5P0C","B0FFG9X6MG","B00180K4UL","B0FFGLAZV0","B0FFFXXS5Q","B0FFHNLKJ5","B0018172V2","B00180K4WW","B0FFGT41QB","B0FFHC3XVW","B00180IJOB","B00180GZZR","B0FFGT0PJG","B0FFF0BVCU","B0FFHOD39M","B0FFHIKBW1","B0FFHC3HTL","B0FFHC3HFN","B0FFHC3GDT","B0FFHC3GB3","B0FFHC3A8Y","B0FFHBBW95","B0FFHBBUIR","B0FFHBB8KG","B0FFHBB2OL","B0FFHBB1S2","B0FFHB9C21","B0FFHB9A7Y","B0FFHB97V3","B0FFHB96MQ","B0FFH9UUZQ","B0FFH9PN46","B0FFH98NUK","B0FFGXYRB2","B00180HEA6","B00180I37U","B00180DY8M","B00180I3ID","B0FFIWF7CC","B001816Q9F","B00180EAJ3","B001817F5R","B0FFGELDD5","B00180K60E","B00180FJAD","B0FFI9T4MW","B00180I3KH","B001816UMZ","B00180JPWB","B001802C43","B001817GCR","B00180ICAP","B0FFJ2W6G0","B0FFK520WG","B0018173B3","B00180J1QF","B001816CEJ","B0FFGEUIVS","B00180ICED","B0018169DU","B00181BEPW","B00180HEQU","B0FFHEWUBU","B00180K7KR","B0FFHCPW7E","B0FFFZF1DH","B0FFGK87FA","B00181765W","B00180KDUK","B00180IICD","B0FFGX6ZG6","B00180I39O","B00180JVCZ","B00180JLPK"];









// count = 888 actual = 900
// function getWritePoisHospital(){
//   for (var i = 0; i < 45; i++) {
//     var page = i + 1;
//     request(`https://restapi.amap.com/v3/place/text?key=c7aeb11746b35a92b7b6eee3178a05e4&keywords=&types=090000&city=210100&children=1&offset=20&page=${page}&extensions=all`, function (error, response, body) {
//         var obj = JSON.parse(body);
//         var pois = obj.pois;
//         var ids = "";
//         pois.forEach(function(poi){
//             ids += `"${poi.id}",`;
//         })
//         console.log(ids);
//         fs.appendFile("./poisHospital.txt", ids, (error)=> {
//             if (error) return console.log("追加文件失败" + error.message);
//             console.log("追加成功");
//         });
//     });
//   }
// }



// function removeDuplicates(arr){
//     let unique_array = []
//     for(let i = 0;i < arr.length; i++){
//         if(unique_array.indexOf(arr[i]) == -1){
//             unique_array.push(arr[i])
//         }
//     }
//     return unique_array
// }
//
// console.log(removeDuplicates(idPois).length); // [ 'DELHI', 'NEWYORK', 'GOA', 'MUMBAI', 'CALIFORNIA' ]

//
// function getWritePoisHospitalShape(){
//     for (var i = 0; i < 5; i++) {
//         var id = idPois[i];
//         request(`https://ditu.amap.com/detail/get/detail?id=${id}`, function (error, response, body) {
//             console.log(error);
//             console.log(body);
//             console.log(JSON.parse(body).shape);
//             // var obj = JSON.parse(body);
//             // var pois = obj.pois;
//             // var ids = "";
//             // pois.forEach(function(poi){
//             //     ids += `"${poi.id}",`;
//             // })
//             // console.log(ids);
//             // fs.appendFile("./poisHospital.txt", ids, (error)=> {
//             //     if (error) return console.log("追加文件失败" + error.message);
//             //     console.log("追加成功");
//             // });
//         });
//     }
//
// }
// // getWritePoisHospital();
// getWritePoisHospitalShape();






